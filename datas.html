<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minha Página</title>

</head>

<body>

</body>
<script>
    //1 função recebe duas datas e retorna a quantidade de dias de diferença
    //2 função recebe duas datas e retorna a quantidade de horas de diferença
    //3 função recebe duas datas e retorna a quantidade de meses de diferença
    //4 função recebe duas datas e retorna a quantidade de anos de diferença
    //5 função recebe duas datas e retorna qual é a maior
    //6 função recebe duas datas e retorna um array ordenado crescente
    //7 função que recebe um array de data e retorna ordenado
    //8 função que recebe um array de datas e retorna um array com as datas maiores que a data atual
    //9 data de nascimento retorna a idade
    //10 despertador com horas minutos e segundo que aperece na tela com alerta
    function calcularDiffDias(data1, data2) {
        var dataInicial = data1.getime();
        var dataFinal = data2.getime();
        if (dataInicial < dataFinal) {
            return [data1, data2];
        } else {
            return [data2, data1];
        }
    }
    function ordernarListaDatas(listaDatas) {
        listaDatas.sort(function (a, b) { return a - b });
        return listaDatas;
    }
    function filtrarDatas(listaDatas) {
        var listaOrdenanda = listaDatas.filter(function (datas) {
            return datas >= new Date();
        })
        return listaOrdenanda;
    }
    function calcularIdade(nascimento) {
        try {
            var idade = (new Date().setHours(0, 0, 0, 0) - nascimento.getTime()) / (1000 * 60 * 60 * 24 * 365);
            if (idade < 0) {
                console.log('voce ainda ira nascer!!!');
            } else {
                return parseInt(idade);
            }
        } catch (error) {
            console.error('ocorreu um erro:', error.message);
        } finally {
            console.log('a execução acabou');
        }
    }
    console.log(calcularIdade(new Date(2024, 10, 18)));
    var listaDespertador = [];
    var timeId = '';
    var display = {
        escreverDisplay: function () {
            var paragrafo = document.createElement("p");
            paragrafo.id = "display";
            document.body.append(paragrafo);
            setInterval(function () {
                document.getElementById("display").innerHTML = new Date().getHours() + ":" + new Date().getMinutes() + ":" + new Date().getSeconds();
            }, 1000);
        },
        criarBotaoDespertador: function () {
            var botao = document.createElement('button');
            botao.innerHTML = 'adicionar novo despertador';
            botao.addEventListener('click', display.adicionarDespertador);
            document.body.append(botao);
        },
        removerDespertador: function (id) {
            clearTimeout(id);
            listaDespertador.splice(listaDespertador.indexOf(id));
            document.getElementById(id).remove();
        },
        adicionarDespertador: function () {
            var horario = prompt('digite a hora do despertador (separado por :)');
            var tamanhoValidoHorario = horario.length <= 5;
            if (!tamanhoValidoHorario) {
                alert("horario Invalido");
                return;
            }
            var horarioseparado = horario.split(':');
            var quantidadeValidaHorarios = horarioseparado.length == 2;
            var horarioValido = isNaN(horarioseparado[0]) === false && isNaN(horarioseparado[1]) === false && horarioseparado[0].length == 2 && horarioseparado[1].length == 2 && parseInt(horarioseparado[0]) <= 24 && parseInt(horarioseparado[1]) <= 60 && parseInt(horarioseparado[0]) >= 0 && parseInt(horarioseparado[1]) >= 0;
            if (!quantidadeValidaHorarios) {
                alert("horario Invalido");
                return;
            } if (!horarioValido) {
                alert("horario Invalido");
                return;
            }
            timeId = display.configurarDespertador(parseInt(horarioseparado[0]), parseInt(horarioseparado[1]));
            var despertadores = document.createElement('button');
            despertadores.innerHTML = horario;
            despertadores.id = timeId;
            despertadores.addEventListener('click', function () {
                display.removerDespertador(timeId);
            });
            document.body.append(despertadores);


        },
        BotaoPararAlarme: function (alarme) {
            var botaoParar = document.createElement('button');
            botaoParar.innerHTML = 'parar alarme';
            addEventListener('click', function () {
                alarme.pause();
                botaoParar.remove();
                display.removerDespertador(timeId);
            })
            document.body.append(botaoParar);
        },
        configurarDespertador: function (horas, minutos) {
            var diffHorario = ((horas - new Date().getHours()) * 3600000) + ((minutos - new Date().getMinutes()) * 60000 - (new Date().getSeconds() * 1000));
            if (diffHorario < 0) {
                diffHorario = (24 * 3600000) + diffHorario;

            }
            var idTimeOut = setTimeout(function () {
                var audio = new Audio('midias/som_despertador.mp3');
                audio.play();
                display.BotaoPararAlarme(audio);
            }, diffHorario);
            listaDespertador.push(idTimeOut);
            return idTimeOut;
        },

        inicializar: function () {

            this.escreverDisplay();
            this.criarBotaoDespertador();
        }

    }
    display.inicializar();
</script>

</html>